cc.SCENE_FADE=4208917214,cc.TRANSITION_ORIENTATION_LEFT_OVER=0,cc.TRANSITION_ORIENTATION_RIGHT_OVER=1,cc.TRANSITION_ORIENTATION_UP_OVER=0,cc.TRANSITION_ORIENTATION_DOWN_OVER=1,cc.TransitionScene=cc.Scene.extend({_inScene:null,_outScene:null,_duration:null,_isInSceneOnTop:!1,_isSendCleanupToScene:!1,_className:"TransitionScene",ctor:function(t,scene){cc.Scene.prototype.ctor.call(this),void 0!==t&&void 0!==scene&&this.initWithDuration(t,scene)},_setNewScene:function(dt){this.unschedule(this._setNewScene);var director=cc.director;this._isSendCleanupToScene=director.isSendCleanupToScene(),director.runScene(this._inScene),cc.eventManager.setEnabled(!0),this._outScene.visible=!0},_sceneOrder:function(){this._isInSceneOnTop=!0},visit:function(){this._isInSceneOnTop?(this._outScene.visit(),this._inScene.visit()):(this._inScene.visit(),this._outScene.visit()),cc.Node.prototype.visit.call(this)},onEnter:function(){cc.Node.prototype.onEnter.call(this),cc.eventManager.setEnabled(!1),this._outScene._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),this._inScene._performRecursive(cc.Node._stateCallbackType.onEnter)},onExit:function(){cc.Node.prototype.onExit.call(this),cc.eventManager.setEnabled(!0),this._outScene._performRecursive(cc.Node._stateCallbackType.onExit),this._inScene._performRecursive(cc.Node._stateCallbackType.onEnterTransitionDidFinish)},cleanup:function(){cc.Node.prototype.cleanup.call(this),this._isSendCleanupToScene&&this._outScene._performRecursive(cc.Node._stateCallbackType.cleanup)},initWithDuration:function(t,scene){if(!scene)throw new Error("cc.TransitionScene.initWithDuration(): Argument scene must be non-nil");if(this.init()){if(this._duration=t,this.attr({x:0,y:0,anchorX:0,anchorY:0}),this._inScene=scene,this._outScene=cc.director.getRunningScene(),this._outScene||(this._outScene=new cc.Scene,this._outScene.init()),this._inScene===this._outScene)throw new Error("cc.TransitionScene.initWithDuration(): Incoming scene must be different from the outgoing scene");return this._sceneOrder(),!0}return!1},finish:function(){this._inScene.attr({visible:!0,x:0,y:0,scale:1,rotation:0}),this._outScene.attr({visible:!1,x:0,y:0,scale:1,rotation:0}),this.schedule(this._setNewScene,0)},hideOutShowIn:function(){this._inScene.visible=!0,this._outScene.visible=!1}}),cc.TransitionScene.create=function(t,scene){return new cc.TransitionScene(t,scene)},cc.TransitionSceneOriented=cc.TransitionScene.extend({_orientation:0,ctor:function(t,scene,orientation){cc.TransitionScene.prototype.ctor.call(this),void 0!=orientation&&this.initWithDuration(t,scene,orientation)},initWithDuration:function(t,scene,orientation){return cc.TransitionScene.prototype.initWithDuration.call(this,t,scene)&&(this._orientation=orientation),!0}}),cc.TransitionSceneOriented.create=function(t,scene,orientation){return new cc.TransitionSceneOriented(t,scene,orientation)},cc.TransitionRotoZoom=cc.TransitionScene.extend({ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._inScene.attr({scale:.001,anchorX:.5,anchorY:.5}),this._outScene.attr({scale:1,anchorX:.5,anchorY:.5});var rotoZoom=cc.sequence(cc.spawn(cc.scaleBy(this._duration/2,.001),cc.rotateBy(this._duration/2,720)),cc.delayTime(this._duration/2));this._outScene.runAction(rotoZoom),this._inScene.runAction(cc.sequence(rotoZoom.reverse(),cc.callFunc(this.finish,this)))}}),cc.TransitionRotoZoom.create=function(t,scene){return new cc.TransitionRotoZoom(t,scene)},cc.TransitionJumpZoom=cc.TransitionScene.extend({ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var winSize=cc.director.getWinSize();this._inScene.attr({scale:.5,x:winSize.width,y:0,anchorX:.5,anchorY:.5}),this._outScene.anchorX=.5,this._outScene.anchorY=.5;var jump=cc.jumpBy(this._duration/4,cc.p(-winSize.width,0),winSize.width/4,2),scaleIn=cc.scaleTo(this._duration/4,1),scaleOut=cc.scaleTo(this._duration/4,.5),jumpZoomOut=cc.sequence(scaleOut,jump),jumpZoomIn=cc.sequence(jump,scaleIn),delay=cc.delayTime(this._duration/2);this._outScene.runAction(jumpZoomOut),this._inScene.runAction(cc.sequence(delay,jumpZoomIn,cc.callFunc(this.finish,this)))}}),cc.TransitionJumpZoom.create=function(t,scene){return new cc.TransitionJumpZoom(t,scene)},cc.TransitionMoveInL=cc.TransitionScene.extend({ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this.initScenes();var action=this.action();this._inScene.runAction(cc.sequence(this.easeActionWithAction(action),cc.callFunc(this.finish,this)))},initScenes:function(){this._inScene.setPosition(-cc.director.getWinSize().width,0)},action:function(){return cc.moveTo(this._duration,cc.p(0,0))},easeActionWithAction:function(action){return new cc.EaseOut(action,2)}}),cc.TransitionMoveInL.create=function(t,scene){return new cc.TransitionMoveInL(t,scene)},cc.TransitionMoveInR=cc.TransitionMoveInL.extend({ctor:function(t,scene){cc.TransitionMoveInL.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},initScenes:function(){this._inScene.setPosition(cc.director.getWinSize().width,0)}}),cc.TransitionMoveInR.create=function(t,scene){return new cc.TransitionMoveInR(t,scene)},cc.TransitionMoveInT=cc.TransitionMoveInL.extend({ctor:function(t,scene){cc.TransitionMoveInL.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},initScenes:function(){this._inScene.setPosition(0,cc.director.getWinSize().height)}}),cc.TransitionMoveInT.create=function(t,scene){return new cc.TransitionMoveInT(t,scene)},cc.TransitionMoveInB=cc.TransitionMoveInL.extend({ctor:function(t,scene){cc.TransitionMoveInL.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},initScenes:function(){this._inScene.setPosition(0,-cc.director.getWinSize().height)}}),cc.TransitionMoveInB.create=function(t,scene){return new cc.TransitionMoveInB(t,scene)},cc.ADJUST_FACTOR=.5,cc.TransitionSlideInL=cc.TransitionScene.extend({ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this.initScenes();var inA=this.action(),outA=this.action(),inAction=cc.sequence(this.easeActionWithAction(inA),cc.callFunc(this.finish,this)),outAction=this.easeActionWithAction(outA);this._inScene.runAction(inAction),this._outScene.runAction(outAction)},initScenes:function(){this._inScene.setPosition(-cc.director.getWinSize().width+cc.ADJUST_FACTOR,0)},action:function(){return cc.moveBy(this._duration,cc.p(cc.director.getWinSize().width-cc.ADJUST_FACTOR,0))},easeActionWithAction:function(action){return new cc.EaseInOut(action,2)}}),cc.TransitionSlideInL.create=function(t,scene){return new cc.TransitionSlideInL(t,scene)},cc.TransitionSlideInR=cc.TransitionSlideInL.extend({ctor:function(t,scene){cc.TransitionSlideInL.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_sceneOrder:function(){this._isInSceneOnTop=!0},initScenes:function(){this._inScene.setPosition(cc.director.getWinSize().width-cc.ADJUST_FACTOR,0)},action:function(){return cc.moveBy(this._duration,cc.p(-(cc.director.getWinSize().width-cc.ADJUST_FACTOR),0))}}),cc.TransitionSlideInR.create=function(t,scene){return new cc.TransitionSlideInR(t,scene)},cc.TransitionSlideInB=cc.TransitionSlideInL.extend({ctor:function(t,scene){cc.TransitionSlideInL.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_sceneOrder:function(){this._isInSceneOnTop=!1},initScenes:function(){this._inScene.setPosition(0,-(cc.director.getWinSize().height-cc.ADJUST_FACTOR))},action:function(){return cc.moveBy(this._duration,cc.p(0,cc.director.getWinSize().height-cc.ADJUST_FACTOR))}}),cc.TransitionSlideInB.create=function(t,scene){return new cc.TransitionSlideInB(t,scene)},cc.TransitionSlideInT=cc.TransitionSlideInL.extend({ctor:function(t,scene){cc.TransitionSlideInL.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_sceneOrder:function(){this._isInSceneOnTop=!0},initScenes:function(){this._inScene.setPosition(0,cc.director.getWinSize().height-cc.ADJUST_FACTOR)},action:function(){return cc.moveBy(this._duration,cc.p(0,-(cc.director.getWinSize().height-cc.ADJUST_FACTOR)))}}),cc.TransitionSlideInT.create=function(t,scene){return new cc.TransitionSlideInT(t,scene)},cc.TransitionShrinkGrow=cc.TransitionScene.extend({ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._inScene.attr({scale:.001,anchorX:2/3,anchorY:.5}),this._outScene.attr({scale:1,anchorX:1/3,anchorY:.5});var scaleOut=cc.scaleTo(this._duration,.01),scaleIn=cc.scaleTo(this._duration,1);this._inScene.runAction(cc.sequence(this.easeActionWithAction(scaleIn),cc.callFunc(this.finish,this))),this._outScene.runAction(this.easeActionWithAction(scaleOut))},easeActionWithAction:function(action){return new cc.EaseOut(action,2)}}),cc.TransitionShrinkGrow.create=function(t,scene){return new cc.TransitionShrinkGrow(t,scene)},cc.TransitionFade=cc.TransitionScene.extend({_color:null,ctor:function(t,scene,color){cc.TransitionScene.prototype.ctor.call(this),this._color=cc.color(),scene&&this.initWithDuration(t,scene,color)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var l=new cc.LayerColor(this._color);this._inScene.visible=!1,this.addChild(l,2,cc.SCENE_FADE);var f=this.getChildByTag(cc.SCENE_FADE),a=cc.sequence(cc.fadeIn(this._duration/2),cc.callFunc(this.hideOutShowIn,this),cc.fadeOut(this._duration/2),cc.callFunc(this.finish,this));f.runAction(a)},onExit:function(){cc.TransitionScene.prototype.onExit.call(this),this.removeChildByTag(cc.SCENE_FADE,!1)},initWithDuration:function(t,scene,color){return color=color||cc.color.BLACK,cc.TransitionScene.prototype.initWithDuration.call(this,t,scene)&&(this._color.r=color.r,this._color.g=color.g,this._color.b=color.b,this._color.a=0),!0}}),cc.TransitionFade.create=function(t,scene,color){return new cc.TransitionFade(t,scene,color)},cc.TransitionCrossFade=cc.TransitionScene.extend({ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var color=cc.color(0,0,0,0),winSize=cc.director.getWinSize(),layer=new cc.LayerColor(color),inTexture=new cc.RenderTexture(winSize.width,winSize.height);inTexture.sprite.anchorX=.5,inTexture.sprite.anchorY=.5,inTexture.attr({x:winSize.width/2,y:winSize.height/2,anchorX:.5,anchorY:.5}),inTexture.begin(),this._inScene.visit(),inTexture.end();var outTexture=new cc.RenderTexture(winSize.width,winSize.height);outTexture.setPosition(winSize.width/2,winSize.height/2),outTexture.sprite.anchorX=outTexture.anchorX=.5,outTexture.sprite.anchorY=outTexture.anchorY=.5,outTexture.begin(),this._outScene.visit(),outTexture.end(),inTexture.sprite.setBlendFunc(cc.ONE,cc.ONE),outTexture.sprite.setBlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA),layer.addChild(inTexture),layer.addChild(outTexture),inTexture.sprite.opacity=255,outTexture.sprite.opacity=255;var layerAction=cc.sequence(cc.fadeTo(this._duration,0),cc.callFunc(this.hideOutShowIn,this),cc.callFunc(this.finish,this));outTexture.sprite.runAction(layerAction),this.addChild(layer,2,cc.SCENE_FADE)},onExit:function(){this.removeChildByTag(cc.SCENE_FADE,!1),cc.TransitionScene.prototype.onExit.call(this)}}),cc.TransitionCrossFade.create=function(t,scene){return new cc.TransitionCrossFade(t,scene)},cc.TransitionTurnOffTiles=cc.TransitionScene.extend({_gridProxy:null,ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,scene&&this.initWithDuration(t,scene)},_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._gridProxy.setTarget(this._outScene),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);var winSize=cc.director.getWinSize(),x=0|12*(winSize.width/winSize.height),toff=cc.turnOffTiles(this._duration,cc.size(x,12)),action=this.easeActionWithAction(toff);this._gridProxy.runAction(cc.sequence(action,cc.callFunc(this.finish,this),cc.stopGrid()))},visit:function(){this._inScene.visit(),this._gridProxy.visit()},easeActionWithAction:function(action){return action}}),cc.TransitionTurnOffTiles.create=function(t,scene){return new cc.TransitionTurnOffTiles(t,scene)},cc.TransitionSplitCols=cc.TransitionScene.extend({_gridProxy:null,_switchTargetToInscene:function(){this._gridProxy.setTarget(this._inScene)},ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,scene&&this.initWithDuration(t,scene)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._gridProxy.setTarget(this._outScene),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);var split=this.action(),seq=cc.sequence(split,cc.callFunc(this._switchTargetToInscene,this),split.reverse());this._gridProxy.runAction(cc.sequence(this.easeActionWithAction(seq),cc.callFunc(this.finish,this),cc.stopGrid()))},onExit:function(){this._gridProxy.setTarget(null),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onExit),cc.TransitionScene.prototype.onExit.call(this)},visit:function(){this._gridProxy.visit()},easeActionWithAction:function(action){return new cc.EaseInOut(action,3)},action:function(){return cc.splitCols(this._duration/2,3)}}),cc.TransitionSplitCols.create=function(t,scene){return new cc.TransitionSplitCols(t,scene)},cc.TransitionSplitRows=cc.TransitionSplitCols.extend({ctor:function(t,scene){cc.TransitionSplitCols.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},action:function(){return cc.splitRows(this._duration/2,3)}}),cc.TransitionSplitRows.create=function(t,scene){return new cc.TransitionSplitRows(t,scene)},cc.TransitionFadeTR=cc.TransitionScene.extend({_gridProxy:null,ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,scene&&this.initWithDuration(t,scene)},_sceneOrder:function(){this._isInSceneOnTop=!1},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._gridProxy.setTarget(this._outScene),this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);var winSize=cc.director.getWinSize(),x=0|12*(winSize.width/winSize.height),action=this.actionWithSize(cc.size(x,12));this._gridProxy.runAction(cc.sequence(this.easeActionWithAction(action),cc.callFunc(this.finish,this),cc.stopGrid()))},visit:function(){this._inScene.visit(),this._gridProxy.visit()},easeActionWithAction:function(action){return action},actionWithSize:function(size){return cc.fadeOutTRTiles(this._duration,size)}}),cc.TransitionFadeTR.create=function(t,scene){return new cc.TransitionFadeTR(t,scene)},cc.TransitionFadeBL=cc.TransitionFadeTR.extend({ctor:function(t,scene){cc.TransitionFadeTR.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},actionWithSize:function(size){return cc.fadeOutBLTiles(this._duration,size)}}),cc.TransitionFadeBL.create=function(t,scene){return new cc.TransitionFadeBL(t,scene)},cc.TransitionFadeUp=cc.TransitionFadeTR.extend({ctor:function(t,scene){cc.TransitionFadeTR.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},actionWithSize:function(size){return new cc.FadeOutUpTiles(this._duration,size)}}),cc.TransitionFadeUp.create=function(t,scene){return new cc.TransitionFadeUp(t,scene)},cc.TransitionFadeDown=cc.TransitionFadeTR.extend({ctor:function(t,scene){cc.TransitionFadeTR.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},actionWithSize:function(size){return cc.fadeOutDownTiles(this._duration,size)}}),cc.TransitionFadeDown.create=function(t,scene){return new cc.TransitionFadeDown(t,scene)},cc.SCENE_RADIAL=49153,cc.TransitionProgress=cc.TransitionScene.extend({_to:0,_from:0,_sceneToBeModified:null,_className:"TransitionProgress",ctor:function(t,scene){cc.TransitionScene.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_setAttrs:function(node,x,y){node.attr({x:x,y:y,anchorX:.5,anchorY:.5})},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this),this._setupTransition();var winSize=cc.director.getWinSize(),texture=new cc.RenderTexture(winSize.width,winSize.height);texture.sprite.anchorX=.5,texture.sprite.anchorY=.5,this._setAttrs(texture,winSize.width/2,winSize.height/2),texture.clear(0,0,0,1),texture.begin(),this._sceneToBeModified.visit(),texture.end(),this._sceneToBeModified===this._outScene&&this.hideOutShowIn();var pNode=this._progressTimerNodeWithRenderTexture(texture),layerAction=cc.sequence(cc.progressFromTo(this._duration,this._from,this._to),cc.callFunc(this.finish,this));pNode.runAction(layerAction),this.addChild(pNode,2,cc.SCENE_RADIAL)},onExit:function(){this.removeChildByTag(cc.SCENE_RADIAL,!0),cc.TransitionScene.prototype.onExit.call(this)},_setupTransition:function(){this._sceneToBeModified=this._outScene,this._from=100,this._to=0},_progressTimerNodeWithRenderTexture:function(texture){return cc.log("cc.TransitionProgress._progressTimerNodeWithRenderTexture(): should be overridden in subclass"),null},_sceneOrder:function(){this._isInSceneOnTop=!1}}),cc.TransitionProgress.create=function(t,scene){return new cc.TransitionProgress(t,scene)},cc.TransitionProgressRadialCCW=cc.TransitionProgress.extend({ctor:function(t,scene){cc.TransitionProgress.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_progressTimerNodeWithRenderTexture:function(texture){var size=cc.director.getWinSize(),pNode=new cc.ProgressTimer(texture.sprite);return cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(pNode.sprite.flippedY=!0),pNode.type=cc.ProgressTimer.TYPE_RADIAL,pNode.reverseDir=!1,pNode.percentage=100,this._setAttrs(pNode,size.width/2,size.height/2),pNode}}),cc.TransitionProgressRadialCCW.create=function(t,scene){return new cc.TransitionProgressRadialCCW(t,scene)},cc.TransitionProgressRadialCW=cc.TransitionProgress.extend({ctor:function(t,scene){cc.TransitionProgress.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_progressTimerNodeWithRenderTexture:function(texture){var size=cc.director.getWinSize(),pNode=new cc.ProgressTimer(texture.sprite);return cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(pNode.sprite.flippedY=!0),pNode.type=cc.ProgressTimer.TYPE_RADIAL,pNode.reverseDir=!0,pNode.percentage=100,this._setAttrs(pNode,size.width/2,size.height/2),pNode}}),cc.TransitionProgressRadialCW.create=function(t,scene){var tempScene=new cc.TransitionProgressRadialCW;return null!==tempScene&&tempScene.initWithDuration(t,scene)?tempScene:new cc.TransitionProgressRadialCW(t,scene)},cc.TransitionProgressHorizontal=cc.TransitionProgress.extend({ctor:function(t,scene){cc.TransitionProgress.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_progressTimerNodeWithRenderTexture:function(texture){var size=cc.director.getWinSize(),pNode=new cc.ProgressTimer(texture.sprite);return cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(pNode.sprite.flippedY=!0),pNode.type=cc.ProgressTimer.TYPE_BAR,pNode.midPoint=cc.p(1,0),pNode.barChangeRate=cc.p(1,0),pNode.percentage=100,this._setAttrs(pNode,size.width/2,size.height/2),pNode}}),cc.TransitionProgressHorizontal.create=function(t,scene){return new cc.TransitionProgressHorizontal(t,scene)},cc.TransitionProgressVertical=cc.TransitionProgress.extend({ctor:function(t,scene){cc.TransitionProgress.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_progressTimerNodeWithRenderTexture:function(texture){var size=cc.director.getWinSize(),pNode=new cc.ProgressTimer(texture.sprite);return cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(pNode.sprite.flippedY=!0),pNode.type=cc.ProgressTimer.TYPE_BAR,pNode.midPoint=cc.p(0,0),pNode.barChangeRate=cc.p(0,1),pNode.percentage=100,this._setAttrs(pNode,size.width/2,size.height/2),pNode}}),cc.TransitionProgressVertical.create=function(t,scene){return new cc.TransitionProgressVertical(t,scene)},cc.TransitionProgressInOut=cc.TransitionProgress.extend({ctor:function(t,scene){cc.TransitionProgress.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_progressTimerNodeWithRenderTexture:function(texture){var size=cc.director.getWinSize(),pNode=new cc.ProgressTimer(texture.sprite);return cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(pNode.sprite.flippedY=!0),pNode.type=cc.ProgressTimer.TYPE_BAR,pNode.midPoint=cc.p(.5,.5),pNode.barChangeRate=cc.p(1,1),pNode.percentage=0,this._setAttrs(pNode,size.width/2,size.height/2),pNode},_sceneOrder:function(){this._isInSceneOnTop=!1},_setupTransition:function(){this._sceneToBeModified=this._inScene,this._from=0,this._to=100}}),cc.TransitionProgressInOut.create=function(t,scene){return new cc.TransitionProgressInOut(t,scene)},cc.TransitionProgressOutIn=cc.TransitionProgress.extend({ctor:function(t,scene){cc.TransitionProgress.prototype.ctor.call(this),scene&&this.initWithDuration(t,scene)},_progressTimerNodeWithRenderTexture:function(texture){var size=cc.director.getWinSize(),pNode=new cc.ProgressTimer(texture.sprite);return cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(pNode.sprite.flippedY=!0),pNode.type=cc.ProgressTimer.TYPE_BAR,pNode.midPoint=cc.p(.5,.5),pNode.barChangeRate=cc.p(1,1),pNode.percentage=100,this._setAttrs(pNode,size.width/2,size.height/2),pNode}}),cc.TransitionProgressOutIn.create=function(t,scene){return new cc.TransitionProgressOutIn(t,scene)},cc.TransitionPageTurn=cc.TransitionScene.extend({ctor:function(t,scene,backwards){cc.TransitionScene.prototype.ctor.call(this),this._gridProxy=new cc.NodeGrid,this.initWithDuration(t,scene,backwards)},_back:!0,_gridProxy:null,_className:"TransitionPageTurn",initWithDuration:function(t,scene,backwards){return this._back=backwards,cc.TransitionScene.prototype.initWithDuration.call(this,t,scene),!0},actionWithSize:function(vector){return this._back?cc.reverseTime(cc.pageTurn3D(this._duration,vector)):cc.pageTurn3D(this._duration,vector)},onEnter:function(){cc.TransitionScene.prototype.onEnter.call(this);var x,y,winSize=cc.director.getWinSize();winSize.width>winSize.height?(x=16,y=12):(x=12,y=16);var action=this.actionWithSize(cc.size(x,y)),gridProxy=this._gridProxy;this._back?(gridProxy.setTarget(this._inScene),gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter),this._inScene.visible=!1,gridProxy.runAction(cc.sequence(action,cc.callFunc(this.finish,this),cc.stopGrid())),this._inScene.runAction(cc.show())):(gridProxy.setTarget(this._outScene),gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter),gridProxy.runAction(cc.sequence(action,cc.callFunc(this.finish,this),cc.stopGrid())))},visit:function(){this._back?this._outScene.visit():this._inScene.visit(),this._gridProxy.visit()},_sceneOrder:function(){this._isInSceneOnTop=this._back}}),cc.TransitionPageTurn.create=function(t,scene,backwards){return new cc.TransitionPageTurn(t,scene,backwards)};